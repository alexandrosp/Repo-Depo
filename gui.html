<!DOCTYPE html>
<html>
<head>
    <title>Pyodide Data Grid Example</title>
    <script src="https://cdn.jsdelivr.net/pyodide/v0.21.0/full/pyodide.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.3/css/jquery.dataTables.css">
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
    </style>
</head>
<body>
    <h1>Pyodide Data Grid Example</h1>
    <div id="table-container"></div>
    <script type="text/javascript">
        async function main() {
            let pyodide = await loadPyodide();
            await pyodide.loadPackage('pandas');
            await pyodide.runPythonAsync(`
import pandas as pd

# Generate a large dataset
data = {
    'Name': [f'Name {i}' for i in range(100)],
    'Age': [i % 50 + 20 for i in range(100)],
    'Gender': ['Male' if i % 2 == 0 else 'Female' for i in range(100)]
}
df = pd.DataFrame(data)

# Convert the dataframe to an HTML table
html_table = df.to_html(index=False, classes='display', table_id='data-table')

# Pass the HTML table to JavaScript
from js import document
document.getElementById('table-container').innerHTML = html_table
            `);

            // Initialize DataTables
            $(document).ready(function() {
                $('#data-table').DataTable();
            });
        }
        main();
    </script>
</body>
</html>
